# This is an example of a Jenkins Configuration as a Code (JCasC)
# Change the file to correspond to your project and needs before you build and run the CI/CD pipeline with compose.

jenkins:
  systemMessage: "Welcome to Jenkins configured by JCasC"
  numExecutors: 2
  mode: NORMAL
  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: "admin"
          password: "admin"
  authorizationStrategy:
    loggedInUsersCanDoAnything:
      allowAnonymousRead: false

jobs:
  - script: >
      pipelineJob('My-First-Pipeline') {
          definition {
              cps {
                  script('''
                      pipeline {
                          agent any
                          stages {
                              stage('Build') {
                                  steps {
                                      echo 'Building...'
                                  }
                              }
                              stage('Test') {
                                  steps {
                                      echo 'Testing...'
                                  }
                              }
                              stage('Deploy') {
                                  steps {
                                      echo 'Deploying...'
                                  }
                              }
                          }
                      }
                  '''.stripIndent())
                  sandbox(true)
              }
          }
      }

